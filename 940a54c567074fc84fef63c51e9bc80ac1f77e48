{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "0fc1b0fc_03c3d8af",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000011
      },
      "writtenOn": "2022-06-20T15:29:24Z",
      "side": 1,
      "message": "Wouldn\u0027t it make more sense to have an ArrayTypeHandler which could take any TypeHandler as its type, and use this to simplify or improve some of the other printers?",
      "revId": "940a54c567074fc84fef63c51e9bc80ac1f77e48",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "12b30a81_caaae53a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000023
      },
      "writtenOn": "2022-06-20T15:49:38Z",
      "side": 1,
      "message": "Syscalls.h only includes \"int *\" as type information.",
      "parentUuid": "0fc1b0fc_03c3d8af",
      "revId": "940a54c567074fc84fef63c51e9bc80ac1f77e48",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bd5e0e44_f55e256f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000011
      },
      "writtenOn": "2022-06-20T16:18:48Z",
      "side": 1,
      "message": "Why not change it to []? Functionally the same in C, but then we could handle this case automatically. Or even better, change it to [2] if it\u0027s a fixed size array.",
      "revId": "940a54c567074fc84fef63c51e9bc80ac1f77e48",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "599c3a87_46ec32cc",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000023
      },
      "writtenOn": "2022-06-20T17:37:44Z",
      "side": 1,
      "message": "I\u0027m not sure I want to involve time in this.",
      "parentUuid": "bd5e0e44_f55e256f",
      "revId": "940a54c567074fc84fef63c51e9bc80ac1f77e48",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4fb26b29_f1159708",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2022-12-22T18:28:03Z",
      "side": 1,
      "message": "Doing this would require rework of gensyscalls, which is not able to handle arrays in arguments.\n\nI think we should merge this until a more generic solution can be implemented, and I\u0027m not sure it\u0027s worth the effort to do something generic if no other syscall is in the same situation.",
      "parentUuid": "599c3a87_46ec32cc",
      "revId": "940a54c567074fc84fef63c51e9bc80ac1f77e48",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fb081b8b_f308267a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000011
      },
      "writtenOn": "2022-12-23T01:56:48Z",
      "side": 1,
      "message": "Do we need to involve gensyscalls in this? We already have this patch_syscalls function, we can just adjust types there.",
      "parentUuid": "4fb26b29_f1159708",
      "revId": "940a54c567074fc84fef63c51e9bc80ac1f77e48",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3ecdabb8_678c3112",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2022-12-23T09:06:11Z",
      "side": 1,
      "message": "The code added in this changeset is in patch_syscalls. So, yes, that\u0027s exactly what this change is doing?\n\nThere is even already a comment at the top of the function saying we should move all the content of this function to gensyscalls.\n\nI don\u0027t see what else can be done here.",
      "parentUuid": "fb081b8b_f308267a",
      "revId": "940a54c567074fc84fef63c51e9bc80ac1f77e48",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3aa96c2c_0f610a2c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000011
      },
      "writtenOn": "2022-12-23T16:58:14Z",
      "side": 1,
      "message": "We can create a separate \"ArrayTypeHandler\" and then change the type-handler instead of just modifying it in patch_syscalls.",
      "parentUuid": "3ecdabb8_678c3112",
      "revId": "940a54c567074fc84fef63c51e9bc80ac1f77e48",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "459bdcf6_711d25d6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2022-12-23T18:00:03Z",
      "side": 1,
      "message": "But what would be the use for that? It would be identical to the existing pointer type handlers and you would still need to provide it the number of array elements in patch_syscals, since it is not known otherwise (unlike other pointer types where the element count is provided by another parameter).\n\nThere really is no reason for the type handler to be different, an array and a pointer are handled the same. The only difference is where the item count comes from. In the case of these two syscalls it\u0027s an hardcoded 2, in other cases it\u0027s set by another parameter. See for example read_pollfd which is used to show the array of file descriptors passed to poll, and uses the \"sibling\" argument to get the \"numfds\" and know how far to loop.\n\nI don\u0027t think we can go any further in simplifying this unless we extend gensyscall to know more about the arguments being passed.",
      "parentUuid": "3aa96c2c_0f610a2c",
      "revId": "940a54c567074fc84fef63c51e9bc80ac1f77e48",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "03701ff5_7a21a5ff",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000011
      },
      "writtenOn": "2022-12-23T18:04:39Z",
      "side": 1,
      "message": "The point would be that the loop would be in ArrayTypeHandler instead of being inside format_signed_integer_pointer, which seems a more logical place for it to go, and then ArrayTypeHandler could be used for any kind of array, whereas in this approach each type printer has to be modified to support arrays.\n\nI guess maybe that\u0027s not worth it, though.",
      "parentUuid": "459bdcf6_711d25d6",
      "revId": "940a54c567074fc84fef63c51e9bc80ac1f77e48",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3183e97c_5c5a278b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2022-12-24T09:40:18Z",
      "side": 1,
      "message": "Each *pointer* type printer has to be modified, but that\u0027s what we want: we want to be able to print the content of pointed memory, no matter if it\u0027s an array (with fixed size) or a pointer (with size from another argument).\n\nIt just happens that we had not needed it yet for array of integers nor pointer to integers.",
      "parentUuid": "03701ff5_7a21a5ff",
      "revId": "940a54c567074fc84fef63c51e9bc80ac1f77e48",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    }
  ]
}