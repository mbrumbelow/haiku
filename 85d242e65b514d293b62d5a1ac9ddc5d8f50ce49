{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "eaa4a64a_1c12210a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2024-08-22T16:40:21Z",
      "side": 1,
      "message": "In my changes to the previous patchset I ended up removing the KEY_Power define, so here is a version not using that. I don\u0027t know if using the HID constants directly is a great idea. Should InterfaceDefs have preset defines for this and the other HID keys instead?",
      "revId": "85d242e65b514d293b62d5a1ac9ddc5d8f50ce49",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e726223a_e0cf875d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000390
      },
      "writtenOn": "2024-08-23T23:30:45Z",
      "side": 1,
      "message": "I think using HID is fine, if we want to be cheeky the 0x10 page of HID maps to unicode, and we could use private use chars in that if there is anything missing.\n\nBut there is *so much* in HID that we can probably map whatever we want without that https://usb.org/sites/default/files/hut1_5.pdf",
      "parentUuid": "eaa4a64a_1c12210a",
      "revId": "85d242e65b514d293b62d5a1ac9ddc5d8f50ce49",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f1432c8d_e7255104",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2024-08-25T07:14:54Z",
      "side": 1,
      "message": "There is nothing missing in HID and my question was not about that.\n\nMy question is, I ended up repeating this code in several places:\n\n    (B_HID_USAGE_PAGE_GENERIC_DESKTOP \u003c\u003c 16) | (B_HID_UID_GD_SYSTEM_POWER_DOWN)\n\nIn the keyboard drivers there is a macro (HID_GD) that expands to this (you use it as `HID_GD(SYSTEM_POWER_DOWN)`). Should this macro be moved to a private header that input server add-ons can use? It would be a little cleaner, but it means that private header needs to include the USB ones.\n\nOr alternatively, should there just be a define for the power key, as there is for some other keys already? (with the same value, of course, but possibly not depending on USB and HID headers).",
      "parentUuid": "e726223a_e0cf875d",
      "revId": "85d242e65b514d293b62d5a1ac9ddc5d8f50ce49",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "951072b2_ff8e1f6d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000016
      },
      "writtenOn": "2024-08-25T11:55:53Z",
      "side": 1,
      "message": "What\u0027s the reasoning to hard-wire this key, and not solve this, for example, via a default keyboard shortcut definition instead?",
      "revId": "85d242e65b514d293b62d5a1ac9ddc5d8f50ce49",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f83ec77c_ad8913b1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000172
      },
      "writtenOn": "2024-08-25T12:45:46Z",
      "side": 1,
      "message": "There are currently no mechanism of default keyboard shortcuts other than hardcoding it like this. As you can see, other global shortcuts are handled above in this code.",
      "parentUuid": "951072b2_ff8e1f6d",
      "revId": "85d242e65b514d293b62d5a1ac9ddc5d8f50ce49",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2d843142_e1ada616",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000605
      },
      "writtenOn": "2024-08-25T14:20:44Z",
      "side": 1,
      "message": "There is a \"shortcut_settings\" file that is installed with Haiku which contains default keyboard shortcuts.\n\nI\u0027ve had my power key wired through the Shortcuts app for a long time now so I\u0027m not sure why code changes are needed and why the action is hardcoded.",
      "parentUuid": "f83ec77c_ad8913b1",
      "revId": "85d242e65b514d293b62d5a1ac9ddc5d8f50ce49",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "672fc4d2_bad67b83",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000605
      },
      "writtenOn": "2024-08-25T14:29:10Z",
      "side": 1,
      "message": "I understand there are some quirks with the handling of keys coming from different sources but I would still prefer not to see more hardcoded shortcuts.",
      "parentUuid": "2d843142_e1ada616",
      "revId": "85d242e65b514d293b62d5a1ac9ddc5d8f50ce49",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "338ef2d3_ff9cf75c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000172
      },
      "writtenOn": "2024-08-25T17:36:32Z",
      "side": 1,
      "message": "Power key is special one, especially on FDT based systems where it is the only standard method to handle motherboard power key. So I think it is fine to have it hardcoded.",
      "parentUuid": "672fc4d2_bad67b83",
      "revId": "85d242e65b514d293b62d5a1ac9ddc5d8f50ce49",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d28991f4_f85b6df4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000605
      },
      "writtenOn": "2024-08-25T20:57:11Z",
      "side": 1,
      "message": "My comment was more about the hardcoded action of shutting down the system.  I would prefer to use that key for some other action.",
      "parentUuid": "338ef2d3_ff9cf75c",
      "revId": "85d242e65b514d293b62d5a1ac9ddc5d8f50ce49",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c24782dc_61549cc2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2024-08-27T20:11:22Z",
      "side": 1,
      "message": "On my current machine, I\u0027m happy that a clean power down by pressing the power key is possible even when input_server is stopped/crashed, or when USB is not working. It happens occasionally.\n\nInitially I thought that going through input_server for shutdown handling was already too much, and that this should be handled at a lower level.\n\nUsing a shortcut would add more reasons for this to break, for example, if the shortcut is implemented by using the shutdown command, and it\u0027s not possible to start new teams for one reason or another (no memory, no more PIDs available, ...).\n\nI mainly use my power key as an \"emergency stop\" (otherwise, I will use the Deskbar shutdown menu). Is it the wrong way to think about it?",
      "parentUuid": "d28991f4_f85b6df4",
      "revId": "85d242e65b514d293b62d5a1ac9ddc5d8f50ce49",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2771063b_57ca1d19",
        "filename": "src/add-ons/input_server/devices/keyboard/KeyboardInputDevice.cpp",
        "patchSetId": 2
      },
      "lineNbr": 29,
      "author": {
        "id": 1000630
      },
      "writtenOn": "2024-08-22T16:39:17Z",
      "side": 1,
      "message": "Suggestion from `haiku-format` is to remove this line/these lines.",
      "range": {
        "startLine": 29,
        "startChar": 0,
        "endLine": 29,
        "endChar": 0
      },
      "tag": "autogenerated:experimental-formatting-bot",
      "revId": "85d242e65b514d293b62d5a1ac9ddc5d8f50ce49",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "67c54ba7_1102d8ef",
        "filename": "src/add-ons/input_server/devices/keyboard/KeyboardInputDevice.cpp",
        "patchSetId": 2
      },
      "lineNbr": 31,
      "author": {
        "id": 1000630
      },
      "writtenOn": "2024-08-22T16:39:17Z",
      "side": 1,
      "message": "Suggestion from `haiku-format` (insert after):\n```c++\n#include \u003ckeyboard_mouse_driver.h\u003e\n```",
      "range": {
        "startLine": 31,
        "startChar": 0,
        "endLine": 31,
        "endChar": 0
      },
      "tag": "autogenerated:experimental-formatting-bot",
      "revId": "85d242e65b514d293b62d5a1ac9ddc5d8f50ce49",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "95067326_1cd8b4fb",
        "filename": "src/add-ons/input_server/devices/keyboard/KeyboardInputDevice.cpp",
        "patchSetId": 2
      },
      "lineNbr": 355,
      "author": {
        "id": 1000630
      },
      "writtenOn": "2024-08-22T16:39:17Z",
      "side": 1,
      "message": "Suggestion from `haiku-format` (change):\n```c++\n\t\tif (isKeyDown\n\t\t\t\u0026\u0026 keycode\n\t\t\t\t\u003d\u003d ((B_HID_USAGE_PAGE_GENERIC_DESKTOP \u003c\u003c 16) | (B_HID_UID_GD_SYSTEM_POWER_DOWN))) {\n```",
      "range": {
        "startLine": 354,
        "startChar": 0,
        "endLine": 355,
        "endChar": 0
      },
      "tag": "autogenerated:experimental-formatting-bot",
      "revId": "85d242e65b514d293b62d5a1ac9ddc5d8f50ce49",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2b709afb_a9f81772",
        "filename": "src/add-ons/input_server/devices/virtio/VirtioInputDevice.cpp",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 1000630
      },
      "writtenOn": "2024-08-22T16:39:17Z",
      "side": 1,
      "message": "Suggestion from `haiku-format` is to remove this line/these lines.",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 20,
        "endChar": 0
      },
      "tag": "autogenerated:experimental-formatting-bot",
      "revId": "85d242e65b514d293b62d5a1ac9ddc5d8f50ce49",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ade1477c_688e8021",
        "filename": "src/add-ons/input_server/devices/virtio/VirtioInputDevice.cpp",
        "patchSetId": 2
      },
      "lineNbr": 22,
      "author": {
        "id": 1000630
      },
      "writtenOn": "2024-08-22T16:39:17Z",
      "side": 1,
      "message": "Suggestion from `haiku-format` (insert after):\n```c++\n#include \u003ckeyboard_mouse_driver.h\u003e\n```",
      "range": {
        "startLine": 22,
        "startChar": 0,
        "endLine": 22,
        "endChar": 0
      },
      "tag": "autogenerated:experimental-formatting-bot",
      "revId": "85d242e65b514d293b62d5a1ac9ddc5d8f50ce49",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "16718835_1dea3730",
        "filename": "src/add-ons/input_server/devices/virtio/VirtioInputDevice.cpp",
        "patchSetId": 2
      },
      "lineNbr": 616,
      "author": {
        "id": 1000630
      },
      "writtenOn": "2024-08-22T16:39:17Z",
      "side": 1,
      "message": "Suggestion from `haiku-format` (change):\n```c++\n\t\t\t\t\t\u0026\u0026 i\n\t\t\t\t\t\t\u003d\u003d ((B_HID_USAGE_PAGE_GENERIC_DESKTOP \u003c\u003c 16)\n```",
      "range": {
        "startLine": 616,
        "startChar": 0,
        "endLine": 616,
        "endChar": 0
      },
      "tag": "autogenerated:experimental-formatting-bot",
      "revId": "85d242e65b514d293b62d5a1ac9ddc5d8f50ce49",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    }
  ]
}