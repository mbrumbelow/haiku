{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "5e5f2fdb_0c863684",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000217
      },
      "writtenOn": "2021-12-20T21:24:47Z",
      "side": 1,
      "message": "Ok, I changed the patch to use a similar method as Pictures and Bitmaps. If this patchset looks ok then I\u0027ll look into the BDataIO/memory loading aspect.  \n\nAlso if I have a small test app / unit test for this, would it be appropriate to put it into the repo under tests/servers/apps/ ?  \n",
      "revId": "d8e2977f21d324b1b13b11cd091be9444f394188",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "33a7056c_d4ca01d9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000023
      },
      "writtenOn": "2021-12-22T06:34:54Z",
      "side": 1,
      "message": "I\u0027m afraid the user font will still be globally available. Did you check in the Fonts preferences? It shouldn\u0027t be found there.",
      "revId": "d8e2977f21d324b1b13b11cd091be9444f394188",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "88968669_3670636b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000172
      },
      "writtenOn": "2021-12-22T12:02:43Z",
      "side": 1,
      "message": "What is the problem with implementing font data passing with area_id?",
      "revId": "d8e2977f21d324b1b13b11cd091be9444f394188",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8daa4cfd_a6611275",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000217
      },
      "writtenOn": "2021-12-23T00:34:07Z",
      "side": 1,
      "message": "No problem. I don\u0027t know anything about Areas/area_ids - and since BDataIO was mentioned it seemed like either one was a possibility.  That said, I was thinking that since this change is supposed to enable webfonts, and I believe BUrlRequests return BDataIOs, that\u0027s a highly likely way the data could arrive. \n\nI don\u0027t know enough about BDataIO nor Areas yet to have input either way. I defer to whatever the best method is.",
      "parentUuid": "88968669_3670636b",
      "revId": "d8e2977f21d324b1b13b11cd091be9444f394188",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9faa39d9_d2f20c6a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000217
      },
      "writtenOn": "2021-12-23T00:34:07Z",
      "side": 1,
      "message": "The user fonts are *technically* globally available but don\u0027t show up in any interface kit queries.  In Appearance-\u003eFont preferences, they don\u0027t appear, nor any app that queries font directories (CharacterMap, StyledEdit, etc.).  However any app can probably try to reference a user font via the styleID/familyID but that would be odd for an app to try to set a BFont to a random user font. \n\nThe reason they are not available is because of the lost family reference.",
      "parentUuid": "33a7056c_d4ca01d9",
      "revId": "d8e2977f21d324b1b13b11cd091be9444f394188",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2cb966ae_80019aa6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2021-12-23T10:39:29Z",
      "side": 1,
      "message": "BDataIO is an abstract class that has a Read method to allow reading data from it. Implementation could be anything (BFile to read from a file, BMemoryIO to read from a buffer in memory, â€¦)\n\nThis would be convenient from the API side (giving maximum flexibility to applications) but not easily possible to forward to app_server (app_server would need to call backeinto the application to read the data)\n\nSo I think we need code to load a font from a file, and from a memory buffer in an application. In the memory buffer case, to avoid having to write the whole buffer into the app_server link, using an area would allow to share memory between the application and app_server directly. This is what we do for BBitmap, for example, but in the opposite direction: memory is allocated in app_server and shared with the application.",
      "parentUuid": "8daa4cfd_a6611275",
      "revId": "d8e2977f21d324b1b13b11cd091be9444f394188",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f4c1b83e_4221379c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000217
      },
      "writtenOn": "2022-02-15T04:07:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2cb966ae_80019aa6",
      "revId": "d8e2977f21d324b1b13b11cd091be9444f394188",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8cb6e0c0_39825866",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000217
      },
      "writtenOn": "2022-02-15T04:07:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9faa39d9_d2f20c6a",
      "revId": "d8e2977f21d324b1b13b11cd091be9444f394188",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ef75de8a_7bbbdb64",
        "filename": "src/servers/app/ServerApp.cpp",
        "patchSetId": 3
      },
      "lineNbr": 3604,
      "author": {
        "id": 1000023
      },
      "writtenOn": "2021-12-22T06:34:54Z",
      "side": 1,
      "message": "this line is too long.",
      "revId": "d8e2977f21d324b1b13b11cd091be9444f394188",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "37828ea2_cdfcda0d",
        "filename": "src/servers/app/ServerApp.cpp",
        "patchSetId": 3
      },
      "lineNbr": 3604,
      "author": {
        "id": 1000217
      },
      "writtenOn": "2022-02-15T04:07:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ef75de8a_7bbbdb64",
      "revId": "d8e2977f21d324b1b13b11cd091be9444f394188",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d3817410_2c86d3d1",
        "filename": "src/servers/app/ServerFont.cpp",
        "patchSetId": 3
      },
      "lineNbr": 143,
      "author": {
        "id": 1000023
      },
      "writtenOn": "2021-12-22T06:34:54Z",
      "side": 1,
      "message": "fOwner(NULL) is missing",
      "revId": "d8e2977f21d324b1b13b11cd091be9444f394188",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d7f501f5_7e6cdb51",
        "filename": "src/servers/app/ServerFont.cpp",
        "patchSetId": 3
      },
      "lineNbr": 143,
      "author": {
        "id": 1000217
      },
      "writtenOn": "2022-02-15T04:07:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d3817410_2c86d3d1",
      "revId": "d8e2977f21d324b1b13b11cd091be9444f394188",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "71b2d603_07567832",
        "filename": "src/servers/app/font/FontManager.cpp",
        "patchSetId": 3
      },
      "lineNbr": 1188,
      "author": {
        "id": 1000023
      },
      "writtenOn": "2021-12-22T06:34:54Z",
      "side": 1,
      "message": "Looks like the family reference gets lost. There shouldn\u0027t be a new FontFamily for each font (style).",
      "revId": "d8e2977f21d324b1b13b11cd091be9444f394188",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dcf31b8e_c9ea6315",
        "filename": "src/servers/app/font/FontManager.cpp",
        "patchSetId": 3
      },
      "lineNbr": 1188,
      "author": {
        "id": 1000217
      },
      "writtenOn": "2021-12-23T00:34:07Z",
      "side": 1,
      "message": "This was on purpose so that the font doesn\u0027t get added to the global font list.  The family reference still exists via the FontStyle but no other way.  I know it creates a new Family for every user font but that was a tradeoff.  If this is a bad idea then I need to figure out a better way to keep the user fonts separate from the system fonts.\n\nRelated question: should a user font be able to be added to a system font family?  Like if Noto Sans -\u003e Regular is a system font, and I add Noto Sans -\u003e Super Italic Bold as a user font, should that be accessible within the app under Noto Sans?  Or do we keep user families separate from system families?",
      "parentUuid": "71b2d603_07567832",
      "revId": "d8e2977f21d324b1b13b11cd091be9444f394188",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f6c4734d_2f0ba43f",
        "filename": "src/servers/app/font/FontManager.cpp",
        "patchSetId": 3
      },
      "lineNbr": 1188,
      "author": {
        "id": 1000217
      },
      "writtenOn": "2021-12-23T00:59:32Z",
      "side": 1,
      "message": "I realized this is a bad idea. There\u0027s potential for memory leaking. I will figure out a better way.",
      "parentUuid": "dcf31b8e_c9ea6315",
      "revId": "d8e2977f21d324b1b13b11cd091be9444f394188",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cd9f291e_8d9b5109",
        "filename": "src/servers/app/font/FontManager.cpp",
        "patchSetId": 3
      },
      "lineNbr": 1188,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2021-12-23T10:39:29Z",
      "side": 1,
      "message": "Fonts loaded this way should not be accessible in any other place than the BFont object that caused the loading, I think.\n\nAnd they should be deleted from app_server when the BFont object is destroyed.",
      "parentUuid": "f6c4734d_2f0ba43f",
      "revId": "d8e2977f21d324b1b13b11cd091be9444f394188",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8038b07d_ec500e8c",
        "filename": "src/servers/app/font/FontManager.cpp",
        "patchSetId": 3
      },
      "lineNbr": 1188,
      "author": {
        "id": 1000217
      },
      "writtenOn": "2022-02-15T04:07:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "cd9f291e_8d9b5109",
      "revId": "d8e2977f21d324b1b13b11cd091be9444f394188",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    }
  ]
}