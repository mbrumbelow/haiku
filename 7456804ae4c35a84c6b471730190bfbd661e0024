{
  "comments": [
    {
      "key": {
        "uuid": "34ea7242_4f33509e",
        "filename": "src/add-ons/kernel/generic/tty/tty.cpp",
        "patchSetId": 3
      },
      "lineNbr": 1306,
      "author": {
        "id": 1000016
      },
      "writtenOn": "2021-10-19T15:31:37Z",
      "side": 1,
      "message": "Maybe the order of the destructions was important somehow?",
      "revId": "7456804ae4c35a84c6b471730190bfbd661e0024",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4f85372c_9cbf2041",
        "filename": "src/add-ons/kernel/generic/tty/tty.cpp",
        "patchSetId": 3
      },
      "lineNbr": 1306,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2021-10-19T15:53:36Z",
      "side": 1,
      "message": "I think this was left unchanged from the original code in src/add-ons/kernel/driver/tty. In that version, the TTY structures are statically allocated in an array, and they are never constructed/deleted. The data inside them is constructed using placement new and deleted by calling the destructors directly. That explains the explicit construction and destruction calls.\n\nIn this version of the code this isn\u0027t needed anymore, since the TTY structure is now properly constructed and deleted using new and delete. But the code had not been fully adjusted to that.\n\nI don\u0027t think the destruction order can change much, when these objects are deleted, the tty_cookies that allow to use them are already deleted before. So really nothing should be happening with the data structure, both queues and the cookie list will be empty at this point.",
      "parentUuid": "34ea7242_4f33509e",
      "revId": "7456804ae4c35a84c6b471730190bfbd661e0024",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5",
      "unresolved": true
    }
  ]
}