{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "97f65506_58bc05d5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000023
      },
      "writtenOn": "2022-01-31T18:04:01Z",
      "side": 1,
      "message": "thanks, but it seems I was a bit optimistic with slot count greater as one. Will try to patch.",
      "revId": "f9e868fc8fde318d34d00831429d727f20f03042",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "875c4172_ad5cc22f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2022-01-31T18:08:53Z",
      "side": 1,
      "message": "Yes, I was about to comment, some things looked suspicious, but I forgot how this was all supposed to work. And the patch was already merged before I could even start to read it...",
      "parentUuid": "97f65506_58bc05d5",
      "revId": "f9e868fc8fde318d34d00831429d727f20f03042",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f763bb8b_a7b83da9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000023
      },
      "writtenOn": "2022-01-31T19:28:47Z",
      "side": 1,
      "message": "I read again, and it seems OK actually... Please review. BAR_INDEX is the starting BAR index. SLOT_NUMBER is the slot index. To find the correct BAR, we loop on the slot index while checking for 64-bit BARs.",
      "parentUuid": "875c4172_ad5cc22f",
      "revId": "f9e868fc8fde318d34d00831429d727f20f03042",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "96f2a5a0_12995207",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2022-04-04T12:16:55Z",
      "side": 1,
      "message": "Hello Korli,\n\nIndeed it seems this code is not perfect for devices with multiple slots or non-zero bar index. Mainly there is an insufficient bounds check, and also I\u0027m not sure how the bar index from SDHCI is supposed to work.\n\nSorry for the delay in reviewing this.",
      "revId": "f9e868fc8fde318d34d00831429d727f20f03042",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "057d709f_d84477e5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000011
      },
      "writtenOn": "2022-04-04T13:42:47Z",
      "side": 1,
      "message": "Probably we should just use a union{} and then have phys_addr_t with the correct values in the 64bit case?",
      "revId": "f9e868fc8fde318d34d00831429d727f20f03042",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bd73270e_4749fa6c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000023
      },
      "writtenOn": "2022-04-04T16:42:15Z",
      "side": 1,
      "message": "32-bit and 64-bit BARs can be mixed.",
      "parentUuid": "057d709f_d84477e5",
      "revId": "f9e868fc8fde318d34d00831429d727f20f03042",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "20403a50_0b478863",
        "filename": "src/add-ons/kernel/busses/mmc/sdhci_pci.cpp",
        "patchSetId": 2
      },
      "lineNbr": 682,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2022-04-04T12:16:55Z",
      "side": 1,
      "message": "the incorrect bound check below (see my other comment) results in possible out of bounds access here",
      "revId": "f9e868fc8fde318d34d00831429d727f20f03042",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "09d0d342_b7ebf533",
        "filename": "src/add-ons/kernel/busses/mmc/sdhci_pci.cpp",
        "patchSetId": 2
      },
      "lineNbr": 682,
      "author": {
        "id": 1000023
      },
      "writtenOn": "2022-04-04T16:42:15Z",
      "side": 1,
      "message": "bar can\u0027t get out of bounds here.",
      "parentUuid": "20403a50_0b478863",
      "revId": "f9e868fc8fde318d34d00831429d727f20f03042",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5a71e987_d261c712",
        "filename": "src/add-ons/kernel/busses/mmc/sdhci_pci.cpp",
        "patchSetId": 2
      },
      "lineNbr": 690,
      "author": {
        "id": 1000023
      },
      "writtenOn": "2022-04-04T16:42:15Z",
      "side": 1,
      "message": "here should be checked that bar is lower than 5.",
      "revId": "f9e868fc8fde318d34d00831429d727f20f03042",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "51f69c73_182d9411",
        "filename": "src/add-ons/kernel/busses/mmc/sdhci_pci.cpp",
        "patchSetId": 2
      },
      "lineNbr": 794,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2022-04-04T12:16:55Z",
      "side": 1,
      "message": "This should be adjusted: 64bit bars are invalid if bar \u003e 4 (not 5) and with 64bit bars, the max number of slots is 3 (if bar \u003d\u003d 0).\n\nThe max number of slots is lower if bar is \u003e 0 and this check should be adjusted accordingly.\n\n\nWe should check the exact meaning of \"bar\" in 64bit BAR case. Will it be 0, 1, 2 to access the 3 possible BAR pairs, or will it be 0, 2, 4 (the index of the first register of the pair)?\n\nThe code in this change assumes the former, but the latter would be simpler.",
      "revId": "f9e868fc8fde318d34d00831429d727f20f03042",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6d38ea2c_69028c53",
        "filename": "src/add-ons/kernel/busses/mmc/sdhci_pci.cpp",
        "patchSetId": 2
      },
      "lineNbr": 794,
      "author": {
        "id": 1000023
      },
      "writtenOn": "2022-04-04T16:42:15Z",
      "side": 1,
      "message": "Each bar can be 32-bit or 64-bit. bar 5 can be valid even if bar 0 is 64-bit.",
      "parentUuid": "51f69c73_182d9411",
      "revId": "f9e868fc8fde318d34d00831429d727f20f03042",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    }
  ]
}