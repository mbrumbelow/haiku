{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "cc22807c_c25fb2b0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000011
      },
      "writtenOn": "2023-11-24T22:05:59Z",
      "side": 1,
      "message": "If I recall correctly, there are often \"good\" and \"bad\" ACPICA versions. It may be worthwhile to see precisely what version the Linux kernel currently uses and pull in that, rather than merely the latest. But tqh will know more.",
      "revId": "3fb543efd100caede7e1fc628f961594cc0b9de5",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "236c0b90_0b8ef605",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000021
      },
      "writtenOn": "2023-12-07T06:55:41Z",
      "side": 1,
      "message": "As it is not working, I\u0027ll add a -1.",
      "revId": "3fb543efd100caede7e1fc628f961594cc0b9de5",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a01dc2b9_cf4280c2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000021
      },
      "writtenOn": "2023-12-07T06:55:41Z",
      "side": 1,
      "message": "Not really. It\u0027s just some patching that is hard to fix depending on how big ACPICA changes were, and then re-applying some fixes.\nMost issues have been with the embedded controller and the lock between hardware and software, often shown by 100% CPU when lock isn\u0027t working. Old ACPI implementations was also a pain in itself, but almost no one use that kind of hardware anymore.",
      "parentUuid": "cc22807c_c25fb2b0",
      "revId": "3fb543efd100caede7e1fc628f961594cc0b9de5",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "eb0d0f48_685bf9b4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2023-12-07T21:38:05Z",
      "side": 1,
      "message": "It seems to be working now after Korli\u0027s changes.",
      "parentUuid": "236c0b90_0b8ef605",
      "revId": "3fb543efd100caede7e1fc628f961594cc0b9de5",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8a3da092_3808f82a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000021
      },
      "writtenOn": "2023-12-07T21:48:14Z",
      "side": 1,
      "message": "Ok, is this a clean ACPICA import, or have you changed any file?\nIt is hard if we mix patches and import in the same commit.\nIf it is mixed I don\u0027t think I can do a review of this.",
      "parentUuid": "eb0d0f48_685bf9b4",
      "revId": "3fb543efd100caede7e1fc628f961594cc0b9de5",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "806a6448_08430190",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2023-12-08T10:13:13Z",
      "side": 1,
      "message": "What I did is:\n\n- Get ACPICA git repository\n- Generate a diff from the previous version we were using to the new one\n- Apply the diff to our copy of ACPICA using \"patch\"\n\nThis preserves our existing changes while importing the new code from upstream. The only manual tweaks are:\n\n- Updating the Jamfile to include new files to build\n- Skipping changes to files we don\u0027t have in our version (the platform-specific code for other OS)\n\nI did check the changes and I don\u0027t see anything suspicious. To review, you can ignore all the files where there is a \"+1/1\" diff stat, these just have a copyright year changes, then the remaining list of files is more manageable.",
      "parentUuid": "8a3da092_3808f82a",
      "revId": "3fb543efd100caede7e1fc628f961594cc0b9de5",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "183fa5ba_b8f47cbc",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000021
      },
      "writtenOn": "2023-12-08T18:19:20Z",
      "side": 1,
      "message": "I really want a clean ACPICA commit and any patches in its own commit. I wanna be able to see exactly what we change compared to standard version. (I am also fine with not being involved in ACPI work at all :) )",
      "parentUuid": "806a6448_08430190",
      "revId": "3fb543efd100caede7e1fc628f961594cc0b9de5",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1e693a6a_2dee6ae8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2023-12-10T09:32:59Z",
      "side": 1,
      "message": "I used this (in a directory with acpica and haiku git repositories):\n\n    git diff --no-index acpica/source haiku/src/add-ons/kernel/bus_managers/acpi/acpica --diff-filter\u003dM\n\nThis shows all the differences between our version and acpica upstream:\n\nhttps://pulkomandy.tk/drop/acpica_haiku_differences.patch\n\nThe summary of the changes is:\n\nIn shared code:\n- Init of GlobalLockSemaphore and OsSemaphore with -1 instead of NULL\n\nIn achaiku.h:\n- enabling of a specific definition ofr ACPI_FLUSH_CPU_CACHE only for x86 platforms (the version in ACPICA has it enabled all the time, but this doesn\u0027t work on non-x86 systems)\n- The parameter to AcpiOsAcquire/ReleaseGlobalLock is now volatile (recent fix by korli)\n- Building in usermode results in a #warning instead of a #error",
      "parentUuid": "183fa5ba_b8f47cbc",
      "revId": "3fb543efd100caede7e1fc628f961594cc0b9de5",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "07a880f3_f8461bbb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000021
      },
      "writtenOn": "2023-12-10T11:19:23Z",
      "side": 1,
      "message": "If I am going to be involved I want commits for fixes. It makes them much easier to track what they are for and why they are needed. A simple diff does not show that in a good way. Here is from previous one: https://github.com/haiku/haiku/commit/3f6f7f7420d37dd080d5d04d7c1c539142f732b6\nhttps://github.com/haiku/haiku/commit/fe0910891a6a6488a0bec335073eb47f82e1a74e\nhttps://github.com/haiku/haiku/commit/748b4883476d569c8f310462c791b8c7fe2f8c94\n\nSome of them should go away now that we use modern gcc for compilation. It\u0027s not maintainable for me if we mash everything together.",
      "parentUuid": "1e693a6a_2dee6ae8",
      "revId": "3fb543efd100caede7e1fc628f961594cc0b9de5",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "86a82f44_b3d0d7bb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2023-12-10T20:00:58Z",
      "side": 1,
      "message": "These commits are still in the git history, they are not touched by this change.\n\nI don\u0027t see the point in removing and re-adding them everytime we update ACPICA.\n\nThe gcc2 fixes were already removed, since they are not needed anymore:\n\nhttps://cgit.haiku-os.org/haiku/commit/src/add-ons/kernel/bus_managers/acpi?id\u003da45709f6300aa0f5d1d8c39b1166f54630b29dfa\n\nhttps://cgit.haiku-os.org/haiku/commit/src/add-ons/kernel/bus_managers/acpi?id\u003d153bb8ef670f8b86ac0eadf5bc8c8179970af460\n\nThe remaining diff (as showm in my \"git diff\" command) is because of these threee commits:\n\nhttps://cgit.haiku-os.org/haiku/commit/src/add-ons/kernel/bus_managers/acpi/acpica?id\u003d748b4883476d569c8f310462c791b8c7fe2f8c94\n\nhttps://cgit.haiku-os.org/haiku/commit/src/add-ons/kernel/bus_managers/acpi/acpica?id\u003d29989979d2bbcd229418123e8c2998819d81976c\n\nhttps://cgit.haiku-os.org/haiku/commit/src/add-ons/kernel/bus_managers/acpi/acpica?id\u003df2acc47f4363f14c20f645e48aac98f48259de26\n\nI don\u0027t see the point in overwriting these changes by importing an unmodified ACPI, and then reintroducing them. Since there are only few changes, it is easy to identify them.\n\nI will also look into upstreaming some of this so we don\u0027t have to maintain patches in the future.",
      "parentUuid": "07a880f3_f8461bbb",
      "revId": "3fb543efd100caede7e1fc628f961594cc0b9de5",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "275248cc_88df3ca8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000021
      },
      "writtenOn": "2023-12-10T22:32:49Z",
      "side": 1,
      "message": "I am bit sad that you do not see any point in how others work. If you want to do it in a different way than I\u0027ve done in the past you are free to do so, I just won\u0027t be involved.",
      "parentUuid": "86a82f44_b3d0d7bb",
      "revId": "3fb543efd100caede7e1fc628f961594cc0b9de5",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3deb12b7_cadbfa27",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2023-12-11T08:16:12Z",
      "side": 1,
      "message": "I didn\u0027t say that it is stupid or useless, just that I don\u0027t understand why it is useful. I have checked in various ways that the information on \"what\u0027s changed from upstream\" is easy enough to get, and that merging changes is not really a problem with this approach of exporting a diff from the acpica repository and importing it into ours.\n\nSo now I\u0027m trying to understand what would be gained by using your method, which, if I understand correctly, is something like this:\n\n- Remove all ACPICA files from the repository\n- Import a new ACPICA version from upstream\n- Manually find all changes we did on the previous version, and re-apply them\n\nI think this method has a higher risk of missing a change from the previous existing sources than what I did. In the way I did it, Git is pointing out the conflicts (if any) for me. Or do you suggest some automated way to extract these commits and reapply them? In that case, what would you use to do that? As I understand you would also like to preserve the commit messages and other metadata.\n\nI understand that your method gives a cleaner overview of what our changes are, but I could easily do this analysis after the fact, especially as there are not that many changes.",
      "parentUuid": "275248cc_88df3ca8",
      "revId": "3fb543efd100caede7e1fc628f961594cc0b9de5",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    }
  ]
}