{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "18ae781f_1852999d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000021
      },
      "writtenOn": "2024-03-17T18:26:15Z",
      "side": 1,
      "message": "Looks good to me, is nvmm.cpp mostly nvmm code, or did you implement all vmx_* functions?\n\nIf it is new code I\u0027d suggest moving most of the defines to a local header.",
      "revId": "4134168a2bc15b5df88e9aa27bb81a709cfbfa15",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "67da4f63_39d19049",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000023
      },
      "writtenOn": "2024-03-17T18:28:39Z",
      "side": 1,
      "message": "the origin of the code isn\u0027t very clear. Could you please clarify?\nThe \"everything in a file\" approach isn\u0027t helpful, I think.",
      "revId": "4134168a2bc15b5df88e9aa27bb81a709cfbfa15",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "34e1dc07_b2eee5d5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000651
      },
      "writtenOn": "2024-03-17T21:26:31Z",
      "side": 1,
      "message": "All the vmx_* functions (and the defines too) are from NVMM\u0027s VMX backend, NetBSD version. See: https://nxr.netbsd.org/xref/src/sys/dev/nvmm/x86/nvmm_x86_vmx.c",
      "parentUuid": "18ae781f_1852999d",
      "revId": "4134168a2bc15b5df88e9aa27bb81a709cfbfa15",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "35b3430f_126a5355",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000651
      },
      "writtenOn": "2024-03-17T21:26:31Z",
      "side": 1,
      "message": "The code comes from the VMX backend of NVMM (NetBSD version), with the excepcion of the first macros (up to line 19 of nvmm.cpp) which come from NetBSD and init_hardware(), publish_devices(), ..., uninit_driver() which I have written. You can find the VMX backend code here: https://nxr.netbsd.org/xref/src/sys/dev/nvmm/x86/nvmm_x86_vmx.c\n\nvmx_ident(), vmx_init_ctls() and vmx_check_ctls() (and the defines) have been ported from there",
      "parentUuid": "67da4f63_39d19049",
      "revId": "4134168a2bc15b5df88e9aa27bb81a709cfbfa15",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "de3b29a4_0dd59c4a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2024-03-17T21:48:16Z",
      "side": 1,
      "message": "If possible, we should try to not mix existing code from NetBSD with our own. The Haiku specific code should be put in separate files (with our standard license/copyright headers) and the code from netbsd should be imported by units of one complete file, possibly adding small changes in a way that NetBSD can include them on their version. This usually means guarding the changes with #ifdef __HAIKU__ preprocessor guards.\n\nMaybe you can look at some network drivers (in src/add-ons/kernel/drivers/network) that are ported from FreeBSD or OpenBSD for an example of this.\n\nThe goal is to make it easy to resynchronize the code with the developments made in other operating systems and get their new features without spending too much time figuring out what goes where, and risking losing some of our changes.",
      "parentUuid": "34e1dc07_b2eee5d5",
      "revId": "4134168a2bc15b5df88e9aa27bb81a709cfbfa15",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "31ad3cc6_a788f396",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000651
      },
      "writtenOn": "2024-03-21T23:55:46Z",
      "side": 1,
      "message": "I think the patchset 3 does exactly this. There are some details left (by re-reading your message now I realized I missed the standard copyright header on nvmm_haiku.cpp) but I think the idea it\u0027s clear. Thank you",
      "parentUuid": "de3b29a4_0dd59c4a",
      "revId": "4134168a2bc15b5df88e9aa27bb81a709cfbfa15",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ddf670aa_bd802a7d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000651
      },
      "writtenOn": "2024-03-26T21:07:20Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "31ad3cc6_a788f396",
      "revId": "4134168a2bc15b5df88e9aa27bb81a709cfbfa15",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2916ae0f_e84b21a9",
        "filename": "build/jam/packages/Haiku",
        "patchSetId": 1
      },
      "lineNbr": 87,
      "author": {
        "id": 1000023
      },
      "writtenOn": "2024-03-17T18:28:39Z",
      "side": 1,
      "message": "to build only on x86_64: nvmm@x86_64",
      "revId": "4134168a2bc15b5df88e9aa27bb81a709cfbfa15",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7fbaa187_d9ffdafb",
        "filename": "build/jam/packages/Haiku",
        "patchSetId": 1
      },
      "lineNbr": 87,
      "author": {
        "id": 1000651
      },
      "writtenOn": "2024-03-17T21:34:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2916ae0f_e84b21a9",
      "revId": "4134168a2bc15b5df88e9aa27bb81a709cfbfa15",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    }
  ]
}