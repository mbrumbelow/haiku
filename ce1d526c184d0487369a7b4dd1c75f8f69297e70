{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "548a7c79_834ca896",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000172
      },
      "writtenOn": "2023-11-29T22:41:06Z",
      "side": 1,
      "message": "I think that using sem_id in kernel code is a bad practice in general because there are a limit of semaphore ID count and it can be easily DoS attacked from userland. While IDs are needed for using kernel objects from userland, there are no such necessary for kernel code, kernel can use objects by pointers directly.",
      "revId": "ce1d526c184d0487369a7b4dd1c75f8f69297e70",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "25ed7cce_6c2d600c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000011
      },
      "writtenOn": "2023-11-29T22:45:52Z",
      "side": 1,
      "message": "In this case the semaphore is kernel-only and never used in userland. So B_CHECK_PERMISSION should prevent userland from ever touching it. So that shouldn\u0027t be a problem here.",
      "parentUuid": "548a7c79_834ca896",
      "revId": "ce1d526c184d0487369a7b4dd1c75f8f69297e70",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6fd2f507_ddf7f254",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000172
      },
      "writtenOn": "2023-11-29T23:16:44Z",
      "side": 1,
      "message": "The problem is additional overhead of ID management and very limited number of semaphore IDs for whole system. So if userland will allocate a lot of semaphores, kernel code will fail with B_NO_MORE_SEMS while a lot of memory still available.",
      "parentUuid": "25ed7cce_6c2d600c",
      "revId": "ce1d526c184d0487369a7b4dd1c75f8f69297e70",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5ce44a76_b77b0922",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000011
      },
      "writtenOn": "2023-11-29T23:18:36Z",
      "side": 1,
      "message": "It\u0027s rare for the kernel to allocate new semaphores after booting has finished, though, and when it does it\u0027s usually at some user-initiated process and will fail gracefully.",
      "parentUuid": "6fd2f507_ddf7f254",
      "revId": "ce1d526c184d0487369a7b4dd1c75f8f69297e70",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    }
  ]
}