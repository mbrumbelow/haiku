{
  "comments": [
    {
      "key": {
        "uuid": "da3b4d13_e882fceb",
        "filename": "src/add-ons/accelerants/radeon_hd/accelerant.cpp",
        "patchSetId": 1
      },
      "lineNbr": 288,
      "author": {
        "id": 1000172
      },
      "writtenOn": "2021-09-14T13:33:34Z",
      "side": 1,
      "message": "detect_displays() and maybe other initialization is needed here.",
      "revId": "eb45b1ba30be5a054f0e0b333b36a319bf198a83",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "598a4d09_53186373",
        "filename": "src/add-ons/accelerants/radeon_hd/accelerant.cpp",
        "patchSetId": 1
      },
      "lineNbr": 303,
      "author": {
        "id": 1000016
      },
      "writtenOn": "2021-09-15T06:51:21Z",
      "side": 1,
      "message": "This seems to happen too early; if you bail out below, the file descriptor is never closed.",
      "revId": "eb45b1ba30be5a054f0e0b333b36a319bf198a83",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8cfb4e26_b1126ffa",
        "filename": "src/add-ons/accelerants/radeon_hd/accelerant.cpp",
        "patchSetId": 1
      },
      "lineNbr": 303,
      "author": {
        "id": 1000172
      },
      "writtenOn": "2021-09-15T12:54:12Z",
      "side": 1,
      "message": "uninit_common() will delete file descriptor. It will be called after this point in case of failure.",
      "parentUuid": "598a4d09_53186373",
      "revId": "eb45b1ba30be5a054f0e0b333b36a319bf198a83",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "88db2ace_5f302e18",
        "filename": "src/add-ons/accelerants/radeon_hd/accelerant.cpp",
        "patchSetId": 1
      },
      "lineNbr": 303,
      "author": {
        "id": 1000016
      },
      "writtenOn": "2021-09-15T14:52:31Z",
      "side": 1,
      "message": "Ah, okay, makes sense.",
      "parentUuid": "8cfb4e26_b1126ffa",
      "revId": "eb45b1ba30be5a054f0e0b333b36a319bf198a83",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "886a9a3e_948bf4d0",
        "filename": "src/add-ons/accelerants/radeon_hd/mode.cpp",
        "patchSetId": 1
      },
      "lineNbr": 327,
      "author": {
        "id": 1000016
      },
      "writtenOn": "2021-09-15T06:51:21Z",
      "side": 1,
      "message": "I think this best belongs into a different commit. At least mentioning it in the commit message should be mandatory, though.",
      "revId": "eb45b1ba30be5a054f0e0b333b36a319bf198a83",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b619d37d_32663b25",
        "filename": "src/add-ons/accelerants/radeon_hd/mode.cpp",
        "patchSetId": 1
      },
      "lineNbr": 327,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-09-15T14:58:45Z",
      "side": 1,
      "message": "Hm. I kinda disagree.  Aren\u0027t moving the display and clone are tightly related?",
      "parentUuid": "886a9a3e_948bf4d0",
      "revId": "eb45b1ba30be5a054f0e0b333b36a319bf198a83",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "72552432_e6d8b1da",
        "filename": "src/add-ons/accelerants/radeon_hd/mode.cpp",
        "patchSetId": 1
      },
      "lineNbr": 327,
      "author": {
        "id": 1000016
      },
      "writtenOn": "2021-09-15T15:39:47Z",
      "side": 1,
      "message": "It\u0027s really been some time, but I don\u0027t think so. IIRC, move_display() can be used to have a virtual screen larger than the visible screen, or even for double buffering.\n\nCloning is only needed if an application other than the app_server needs access to the accelerant directly. The only use case should be BWindowScreen, but I don\u0027t know if anybody is still using it.\n\nIf app_server would implement a virtual screen, it would use move_display() without cloning the accelerant.",
      "parentUuid": "b619d37d_32663b25",
      "revId": "eb45b1ba30be5a054f0e0b333b36a319bf198a83",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "26f7f365_31bc0b76",
        "filename": "src/add-ons/accelerants/radeon_hd/mode.cpp",
        "patchSetId": 1
      },
      "lineNbr": 345,
      "author": {
        "id": 1000172
      },
      "writtenOn": "2021-09-14T13:33:34Z",
      "side": 1,
      "message": "Is this correct?",
      "revId": "eb45b1ba30be5a054f0e0b333b36a319bf198a83",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fb54337a_b9096394",
        "filename": "src/add-ons/accelerants/radeon_hd/mode.cpp",
        "patchSetId": 1
      },
      "lineNbr": 345,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-09-14T14:36:51Z",
      "side": 1,
      "message": "see radeon_set_display_mode.\n\nI think you *might* need:\n\n\nencoder_output_lock(true);\ndisplay_crtc_lock(crtcID, ATOM_ENABLE);\n//radeon_dpms_set(crtcID, B_DPMS_OFF); // Maybe not needed\n\ndisplay_crtc_fb_set(crtcID, mode);\n\n//radeon_dpms_set(crtcID, B_DPMS_ON); // maybe not needed\ndisplay_crtc_lock(crtcID, ATOM_DISABLE);\nencoder_output_lock(false);\n\n\n\n\n\ndisplay_crtc_fb_set then should set the new viewportStart via:\nWrite32(CRT, regs-\u003eviewportStart, (mode.h_display_start \u003c\u003c 16) | mode.v_display_start);\n\nInstead of the current:\nWrite32(CRT, regs-\u003eviewportStart, 0);",
      "parentUuid": "26f7f365_31bc0b76",
      "revId": "eb45b1ba30be5a054f0e0b333b36a319bf198a83",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5",
      "unresolved": true
    }
  ]
}