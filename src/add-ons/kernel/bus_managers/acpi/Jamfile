SubDir HAIKU_TOP src add-ons kernel bus_managers acpi ;

UsePrivateKernelHeaders ;
SubDirSysHdrs [ FDirName $(SUBDIR) uacpi include ] ;
SubDirSysHdrs [ FDirName $(SUBDIR) uacpi include uacpi ] ;
SubDirHdrs [ FDirName $(SUBDIR) arch $(TARGET_KERNEL_ARCH_DIR) ] ;
SubDirHdrs [ FDirName $(SUBDIR) $(DOTDOT) pci ] ;
SubDirCcFlags -D_KERNEL_MODE ;


local arch_src =
	arch_init.cpp
	;

local uacpi_src =
	default_handlers.c
	event.c
	interpreter.c
	io.c
	mutex.c
	namespace.c
	notify.c
	opcodes.c
	opregion.c
	osi.c
	registers.c
	resources.c
	shareable.c
	sleep.c
	stdlib.c
	tables.c
	types.c
	uacpi.c
	utilities.c
	;

KernelAddon acpi :
	ACPICAHaiku.cpp
	BusManager.cpp
	Module.cpp
	Device.cpp
	NamespaceDump.cpp
	EmbeddedController.cpp
	Call.cpp

	$(arch_src)
	$(uacpi_src)
	:
	;

SEARCH on [ FGristFiles $(arch_src)  ] = [ FDirName $(HAIKU_TOP) src add-ons kernel bus_managers acpi arch $(TARGET_KERNEL_ARCH_DIR) ] ;
SEARCH on [ FGristFiles $(uacpi_src)  ] = [ FDirName $(HAIKU_TOP) src add-ons kernel bus_managers acpi uacpi source ] ;
