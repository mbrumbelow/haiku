SubDir HAIKU_TOP src system libroot posix string ;

UsePrivateHeaders
	[ FDirName libroot ]
	[ FDirName libroot locale ]
	;


# Our versions of strdup and strndup check for NULL parameters (for BeOS
# compatibility), but GCC optimizes this away as its builtins don't handle
# it.
C++FLAGS += -fno-builtin-strdup -fno-builtin-strndup ;

local architectureObject ;
for architectureObject in [ MultiArchSubDirSetup ] {
	on $(architectureObject) {
		local architecture = $(TARGET_PACKAGING_ARCH) ;

		MergeObject <$(architecture)>posix_string.o :
			ffs.cpp
			strcoll.cpp
			strdup.cpp
			strerror.c
			strlwr.c
			strncpy.cpp
			strndup.cpp
			strnlen.cpp
			strupr.c
			strxfrm.cpp

			# these are here for GCC2 compatibility only
			bcmp.c
			bcopy.c
			bzero.c
			;
	}
}

local arch ;
for arch in $(TARGET_ARCHS) {
	HaikuSubInclude arch $(arch) ;
}
