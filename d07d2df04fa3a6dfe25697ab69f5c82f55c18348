{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "d6812b37_04fe03d3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000172
      },
      "writtenOn": "2023-04-08T20:49:12Z",
      "side": 1,
      "message": "This looks like a hack. Accumulating hacks in code base is a bad idea. Maybe set CALL_ONCE to PTHREAD_ONCE_INIT and show some warning when value zero is set to diagnose broken programs? And delete warning in next release.",
      "revId": "d07d2df04fa3a6dfe25697ab69f5c82f55c18348",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "08c50655_da585c44",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000023
      },
      "writtenOn": "2023-04-09T06:16:24Z",
      "side": 1,
      "message": "maybe we could check the abi and enable some compatibility, while fixing the value for new binaries?",
      "revId": "d07d2df04fa3a6dfe25697ab69f5c82f55c18348",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d3793395_73bb6842",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000172
      },
      "writtenOn": "2023-04-09T06:36:34Z",
      "side": 1,
      "message": "I see no practical meaning in such over-engineering. It will make code complicated and hard to read and maintain.\n\ncall_once was broken all the time since introducing, so changing CALL_ONCE constant value to -1 will not cause any regressions to standard-compliant code. But it will fix programs after recompilation.",
      "parentUuid": "08c50655_da585c44",
      "revId": "d07d2df04fa3a6dfe25697ab69f5c82f55c18348",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4456d73a_92ce0cd9",
        "filename": "src/system/libroot/posix/pthread/pthread_once.cpp",
        "patchSetId": 1
      },
      "lineNbr": 83,
      "author": {
        "id": 1000172
      },
      "writtenOn": "2023-04-08T22:01:14Z",
      "side": 1,
      "message": "sem_id 0 is valid semaphore ID.",
      "revId": "d07d2df04fa3a6dfe25697ab69f5c82f55c18348",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9836f27e_ab7977ad",
        "filename": "src/system/libroot/posix/pthread/pthread_once.cpp",
        "patchSetId": 1
      },
      "lineNbr": 83,
      "author": {
        "id": 1000011
      },
      "writtenOn": "2023-04-09T04:24:28Z",
      "side": 1,
      "message": "Is it? That seems like an oversight if so, to be honest...",
      "parentUuid": "4456d73a_92ce0cd9",
      "revId": "d07d2df04fa3a6dfe25697ab69f5c82f55c18348",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6310cf12_c8ebbe1b",
        "filename": "src/system/libroot/posix/pthread/pthread_once.cpp",
        "patchSetId": 1
      },
      "lineNbr": 83,
      "author": {
        "id": 1000172
      },
      "writtenOn": "2023-04-09T06:41:09Z",
      "side": 1,
      "message": "I added some debug output and confirmed that sem_id is actually used:\n\narch_vm_init_end(): 3 virtual ranges to keep:\n  start: 0xffffffc0006ef000, size: 0x10000\n  start: 0xffffffc0006ff000, size: 0x4000000\n  start: 0xffffffc0046ff000, size: 0x8\nscheduler_init: found 1 logical cpu and 0 cache levels\nscheduler switches: single core: true, cpu load tracking: false, core load tracking: false\nscheduler: switching to low latency mode\ncreate_sem_etc() -\u003e 0\ncreate_sem_etc() -\u003e 1\ncreate_sem_etc() -\u003e 2\ncreate_sem_etc() -\u003e 3\ncreate_sem_etc() -\u003e 4\ncreate_sem_etc() -\u003e 5",
      "parentUuid": "9836f27e_ab7977ad",
      "revId": "d07d2df04fa3a6dfe25697ab69f5c82f55c18348",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    }
  ]
}