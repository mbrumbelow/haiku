{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "7faaf8e3_bbf20f21",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000011
      },
      "writtenOn": "2024-04-01T15:48:19Z",
      "side": 1,
      "message": "This shouldn\u0027t be necessary, I think; if the partition was mounted R-O then these hooks should not be called at all?",
      "revId": "345136140ba2b199e76837ebce5523be1bd26614",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "17e70c62_e9716d13",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000624
      },
      "writtenOn": "2024-04-01T17:32:20Z",
      "side": 1,
      "message": "vfs layer checks if the function is present or not. Since in our case, function is not NULL, control reaches btrfs driver and we need to reject there:\n\nhttps://xref.landonf.org/source/xref/haiku/src/system/kernel/fs/vfs.cpp#5889",
      "parentUuid": "7faaf8e3_bbf20f21",
      "revId": "345136140ba2b199e76837ebce5523be1bd26614",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f04208b9_4c7ba163",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000011
      },
      "writtenOn": "2024-04-01T17:41:42Z",
      "side": 1,
      "message": "Hmm, that looks like an oversight. It doesn\u0027t look like BFS does any checks like this in its remove(). We should probably check access() in VFS here, and access() should return an error if the volume is read-only.",
      "parentUuid": "17e70c62_e9716d13",
      "revId": "345136140ba2b199e76837ebce5523be1bd26614",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a3005d93_f59cfb5c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000624
      },
      "writtenOn": "2024-04-02T10:31:59Z",
      "side": 1,
      "message": "My mistake. I had removed read only flag btrfs `Volume::Mount` which caused this issue. Without it, as expected, we first do a `access` call then go ahead if no error status.\n\nClosing this review request.",
      "parentUuid": "f04208b9_4c7ba163",
      "revId": "345136140ba2b199e76837ebce5523be1bd26614",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    }
  ]
}