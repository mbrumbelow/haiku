{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "c324fe77_cfe65bdd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000390
      },
      "writtenOn": "2023-01-04T23:23:16Z",
      "side": 1,
      "message": "The commit as it is now breaks my touchpad.\n\nThe tracing in movement_maker is also not working with this commit (but that is a problem intree already)",
      "revId": "eb708e66300a63e03a86806e27754872387543c9",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9351d7ac_f07fc213",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2023-01-05T12:23:01Z",
      "side": 1,
      "message": "can you share logs from the kernel-side tracing? on IRC you mentionned errors on kernel side already. There\u0027s no need for logs on the userland side if kernel part isn\u0027t working yet.",
      "parentUuid": "c324fe77_cfe65bdd",
      "revId": "eb708e66300a63e03a86806e27754872387543c9",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "240fc027_2c82b48e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000390
      },
      "writtenOn": "2023-01-05T12:32:52Z",
      "side": 1,
      "message": "I\u0027m rebuilding with TRACE_PS2_SYNAPTICS, I assume it is the trace you want.",
      "parentUuid": "9351d7ac_f07fc213",
      "revId": "eb708e66300a63e03a86806e27754872387543c9",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "75914f78_a6bb370d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000390
      },
      "writtenOn": "2023-01-05T13:17:31Z",
      "side": 1,
      "message": "I\u0027ve uploaded the trace here: https://termbin.com/k69eo",
      "parentUuid": "240fc027_2c82b48e",
      "revId": "eb708e66300a63e03a86806e27754872387543c9",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "adbd8f2c_4cd2e77a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2023-01-06T12:19:03Z",
      "side": 1,
      "message": "I pushed an updated version of the change, please try again and let us know if it does better.",
      "parentUuid": "75914f78_a6bb370d",
      "revId": "eb708e66300a63e03a86806e27754872387543c9",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "50df78c6_361d85d7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000390
      },
      "writtenOn": "2023-01-06T20:56:07Z",
      "side": 1,
      "message": "No change in behaviour, the touchpad is still unresponsive.\n\nthe line with bad mouse data is now gone, it is still severall lines of the \"first package begins not with bit 1, 0\"\n\nLogging the entire package would make sense indeed i think.",
      "parentUuid": "adbd8f2c_4cd2e77a",
      "revId": "eb708e66300a63e03a86806e27754872387543c9",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0ee5a5ed_317fa861",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2023-01-09T08:12:08Z",
      "side": 1,
      "message": "Probably you should enable a lower level of tracing to get the received bytes from the PS2 port. A \"package\" is just 3 bytes so it should not be a problem to log them, but it\u0027s not very convenient to do it if the package start marker bits are not as expected.\n\nIt seems the protocol your touchpad is using doesn\u0027t match what I found in the Linux driver (or I misunderstood the Linux driver).",
      "parentUuid": "50df78c6_361d85d7",
      "revId": "eb708e66300a63e03a86806e27754872387543c9",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9de32ee2_58c67349",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2023-01-12T12:13:30Z",
      "side": 1,
      "message": "I have added the extra logging, can you test again?",
      "parentUuid": "0ee5a5ed_317fa861",
      "revId": "eb708e66300a63e03a86806e27754872387543c9",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ccd88d60_6f8e68fd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000390
      },
      "writtenOn": "2023-01-12T15:00:54Z",
      "side": 1,
      "message": "Sure.\nDo you want any particular actions logged? I\u0027ll try to enable the time tracking for syslog and document what I did in an annotated log if you\u0027d like",
      "parentUuid": "9de32ee2_58c67349",
      "revId": "eb708e66300a63e03a86806e27754872387543c9",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2d1cd1cb_b28428a3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2023-01-12T16:10:07Z",
      "side": 1,
      "message": "Yes, ideally if you can make separate log for moving a finger to the left, to the right, up, down, and clicking buttons, all with different pressures, it may help.\n\nBut at first I will just need to figure out the basic packet format which is the part that isn\u0027t working; so I will just be looking at which bits don\u0027t change and repeat every time.",
      "parentUuid": "ccd88d60_6f8e68fd",
      "revId": "eb708e66300a63e03a86806e27754872387543c9",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "56a53bdb_14c92bcb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000390
      },
      "writtenOn": "2023-01-16T10:56:07Z",
      "side": 1,
      "message": "New log: https://termbin.com/jtoj\n\nThe touchpad now responds again",
      "parentUuid": "2d1cd1cb_b28428a3",
      "revId": "eb708e66300a63e03a86806e27754872387543c9",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "44844d39_3d1c73cb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2023-01-17T19:41:18Z",
      "side": 1,
      "message": "Your touchpad does not seem to use the \"extended W mode\" for anything. Anyway, I think the implementation is reasonably complete now and this could be merged. It might fix some things for clickpads since the detection for these wasn\u0027t quite correct. And even in single touch mode, the reporting of the finger width and finger count will be better. Now it\u0027s up to the movement_maker in input_server to make sense of that data.",
      "parentUuid": "56a53bdb_14c92bcb",
      "revId": "eb708e66300a63e03a86806e27754872387543c9",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ec5126e0_77563016",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2023-01-18T12:45:15Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "44844d39_3d1c73cb",
      "revId": "eb708e66300a63e03a86806e27754872387543c9",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cb7bc17a_c03f7375",
        "filename": "src/add-ons/kernel/bus_managers/ps2/ps2_synaptics.cpp",
        "patchSetId": 3
      },
      "lineNbr": 234,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2023-01-05T20:31:41Z",
      "side": 1,
      "message": "it would make more sense to use wValue instead of event.fingerWidth here. Same value, so no functional change, but it would be clearer what we\u0027re testing",
      "revId": "eb708e66300a63e03a86806e27754872387543c9",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "777d4ed8_6ae197b1",
        "filename": "src/add-ons/kernel/bus_managers/ps2/ps2_synaptics.cpp",
        "patchSetId": 3
      },
      "lineNbr": 234,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2023-01-06T12:19:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "cb7bc17a_c03f7375",
      "revId": "eb708e66300a63e03a86806e27754872387543c9",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5e2e8ac4_6db90197",
        "filename": "src/add-ons/kernel/bus_managers/ps2/ps2_synaptics.cpp",
        "patchSetId": 3
      },
      "lineNbr": 242,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2023-01-05T20:31:41Z",
      "side": 1,
      "message": "this should be event.yPosition",
      "revId": "eb708e66300a63e03a86806e27754872387543c9",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "493d7f24_4ddd5076",
        "filename": "src/add-ons/kernel/bus_managers/ps2/ps2_synaptics.cpp",
        "patchSetId": 3
      },
      "lineNbr": 242,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2023-01-06T12:19:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5e2e8ac4_6db90197",
      "revId": "eb708e66300a63e03a86806e27754872387543c9",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "73907932_74a11cc5",
        "filename": "src/add-ons/kernel/bus_managers/ps2/ps2_synaptics.cpp",
        "patchSetId": 3
      },
      "lineNbr": 702,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2023-01-05T20:31:41Z",
      "side": 1,
      "message": "I checked the Linux driver, they have a \"relaxed\" mode which corresponds to removing this check: https://elixir.bootlin.com/linux/latest/source/drivers/input/mouse/synaptics.c#L1168\n\nSo, can you try commenting this (lines 702 to 707) out? If this works, we should probably disable these when enabling multitouch mode.\n\nIt would also be useful to log all the received bytes here for debugging.",
      "revId": "eb708e66300a63e03a86806e27754872387543c9",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "222c3edd_bd4f014a",
        "filename": "src/add-ons/kernel/bus_managers/ps2/ps2_synaptics.cpp",
        "patchSetId": 3
      },
      "lineNbr": 702,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2023-01-06T12:19:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "73907932_74a11cc5",
      "revId": "eb708e66300a63e03a86806e27754872387543c9",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e7e76aee_ce364481",
        "filename": "src/add-ons/kernel/bus_managers/ps2/ps2_synaptics.h",
        "patchSetId": 3
      },
      "lineNbr": 40,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2023-01-05T12:28:26Z",
      "side": 1,
      "message": "The mode here is set to \"multitouch\" but the movement_maker does not make any use of it. It should probably check this in addition to fingerWidth \u003d\u003d 2 to decide to call _MultiTouchMovement.\n\nThis requires moving the \"mode\" defines back into this .h file",
      "revId": "eb708e66300a63e03a86806e27754872387543c9",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "79522541_8d003a8a",
        "filename": "src/add-ons/kernel/bus_managers/ps2/ps2_synaptics.h",
        "patchSetId": 3
      },
      "lineNbr": 40,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2023-01-06T12:19:03Z",
      "side": 1,
      "message": "the movement_maker is not using synaptics_cookie, and I think it shouldn\u0027t. So for now the more fragile detection using \"finger_width\" remains. Probably we have to extend movement_maker to handle multitouch info from the driver explicitly in each event.",
      "parentUuid": "e7e76aee_ce364481",
      "revId": "eb708e66300a63e03a86806e27754872387543c9",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "976a0b7d_18c3ec65",
        "filename": "src/add-ons/kernel/bus_managers/ps2/ps2_synaptics.h",
        "patchSetId": 3
      },
      "lineNbr": 40,
      "author": {
        "id": 1000001
      },
      "writtenOn": "2023-01-18T12:45:15Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "79522541_8d003a8a",
      "revId": "eb708e66300a63e03a86806e27754872387543c9",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    }
  ]
}