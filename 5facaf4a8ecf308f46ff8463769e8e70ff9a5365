{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "d75f5ad3_1e4a541e",
        "filename": "src/kits/tracker/Pose.cpp",
        "patchSetId": 7
      },
      "lineNbr": 690,
      "author": {
        "id": 1000011
      },
      "writtenOn": "2025-01-27T17:22:40Z",
      "side": 1,
      "message": "There are multiple places we return from this method before PopState would be called. We thus need to do one of two things here:\n\n1. If this method is always called from a BView::Draw hook, then we don\u0027t need to push/pop states at all, because BView already does that during update sessions.\n\n2. If it\u0027s not always called from a draw hook, then we need to use a RAII object to pop the state so that all exits from the method invoke it.\n\nIt looks like there are multiple places above that call PushState without PopState. So maybe we can just drop those too?",
      "revId": "5facaf4a8ecf308f46ff8463769e8e70ff9a5365",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "281114ee_650dcfc8",
        "filename": "src/kits/tracker/Pose.cpp",
        "patchSetId": 7
      },
      "lineNbr": 690,
      "author": {
        "id": 1000013
      },
      "writtenOn": "2025-01-27T18:59:44Z",
      "side": 1,
      "message": "working on this now…\n\nIf I don’t PushState() and PopState() then the transparency will be wrong sometimes at the end of a drag. We’re not using the BView::Draw() hook here, this is called from BPoseView for each of the poses it needs to draw.\n\nThere are a few functions like BPoseView::MakeDragBitmap() and IconCache::DrawIconBlitter() (or something to that effect) that are altering the draw state to set transparency with different alpha values so we shouldn’t PushState() and PopState() unconditionally here… I think.",
      "parentUuid": "d75f5ad3_1e4a541e",
      "revId": "5facaf4a8ecf308f46ff8463769e8e70ff9a5365",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3335eafb_a8db0de4",
        "filename": "src/kits/tracker/Pose.cpp",
        "patchSetId": 7
      },
      "lineNbr": 690,
      "author": {
        "id": 1000011
      },
      "writtenOn": "2025-01-27T19:00:41Z",
      "side": 1,
      "message": "I would just try doing it unconditionally once at the top of the method and then unconditionally doing it in all exit/return paths, that should simplify things and shouldn\u0027t break anything I think.",
      "parentUuid": "281114ee_650dcfc8",
      "revId": "5facaf4a8ecf308f46ff8463769e8e70ff9a5365",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "12921b11_7747f22c",
        "filename": "src/kits/tracker/Pose.cpp",
        "patchSetId": 7
      },
      "lineNbr": 690,
      "author": {
        "id": 1000011
      },
      "writtenOn": "2025-01-27T22:22:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3335eafb_a8db0de4",
      "revId": "5facaf4a8ecf308f46ff8463769e8e70ff9a5365",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3d852a25_94acdec7",
        "filename": "src/kits/tracker/TextWidget.cpp",
        "patchSetId": 7
      },
      "lineNbr": 612,
      "author": {
        "id": 1000013
      },
      "writtenOn": "2025-01-27T16:26:09Z",
      "side": 1,
      "message": "We might as well ASSERT that drawView is not NULL here since since we\u0027re dereferencing the drawView pointer in this method without checking it first. These ASSERT\u0027s are used in lieu of doing NULL checks. We\u0027re assuming these pointers are set correctly here, which they must be or it would crash. The ASSERT\u0027s are for if there is a crash a developer can put the build in DEBUG mode to figure out why.",
      "revId": "5facaf4a8ecf308f46ff8463769e8e70ff9a5365",
      "serverId": "40b9299a-d8a8-485d-9b01-e6d3f45eefb5"
    }
  ]
}